{% extends 'base.html' %}
{% load staticfiles %}
{% block body %}
<style>
    #map {
	height: 100%;
}

a {
	text-decoration: none;
}

.row {
  margin:15px 0;
}
label {
  margin-bottom: 0;
  margin-left: 1px;
}
</style>

<div class="container">
	<div class="row">
		<div class="col-md-9">




<ul class="nav nav-tabs" role="tablist">
  <li class="nav-item">
    <a class="nav-link  active" href="" role="tab" data-toggle="tab" aria-selected="true" onclick='mapHide()'>List</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="" role="tab" data-toggle="tab" onclick='mapShow()'>Map</a>
  </li>

</ul>

<div id="map" style='display:none;height:1000px;'></div>


<!-- Tab panes -->
<div class="tab-content">
  <div role="tabpanel" class="tab-pane active" id="profile">










      		{% for i in pagin %}


			<div class="card" style="margin-top: 40px; margin-bottom: 40px;">
			    <a href='{% url 'home:details' i.id_user category1 %}'>
				<div class="card-header">
					{{i.user.username}}
				</div>

				<div class="card-body">
					<img class="img-fluid img-thumbnail" src="{{i.image.url}}">
				</div>
				</a>
				<div class="card-footer">
				    <b>${{i.Price}}</b>
				    <i class='fa fa-star fa-lg' id='star{{i.id_user}}' style='float:right; cursor:pointer; {% ifequal i.saved True %}color:orange;{% endifequal %}' onclick='StarSearch("{{i.id_user}}")'></i>
				    <p>{{i.street_name}} {{i.street_number}}</p>
					<p>{{i.state}} {{i.suburb}}</p>
					<p><i class="fa fa-bed"></i>{{i.Bedrooms}} <i class='fa fa-bath'></i>{{i.Bathrooms}} <i class="fa fa-car"></i>{{i.Car_spaces}}| {{i.Property_type}}</p>
				</div>
			</div>

		{% endfor %}



            <div class="pagination">
            <span class="step-links">
            {% if pagin.has_previous %}
                <a href="?page=1">&laquo; first</a>
                <a href="?page={{ pagin.previous_page_number }}">previous</a>
            {% endif %}

            <span class="current">
                Page {{ pagin.number }} of {{ pagin.paginator.num_pages }}.
            </span>

            {% if pagin.has_next %}
                <a href="?page={{ pagin.next_page_number }}">next</a>
                <a href="?page={{ pagin.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
            </span>
            </div>


  </div>
  <div role="tabpanel" class="tab-pane fade" id="buzz">

      <!--<div id="map"></div>-->

  </div>

</div>




        <!--{{category1}}-->







		</div>
			<!-- end of col-md-9-->

            <div class='col-md-3'>

<form action="{% url 'home:filter_search' %}" method="post"> {% csrf_token %}


  <div class="modal fade col-md-12" id="myModal" >
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable col-md-12">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Modal Heading</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          Modal body..
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>

      </div>
    </div>
  </div>
  <!--end of modal-->


<div id="searchitem" style="display: none;">

</div>




<input type="text" name="hiddensearch" id="hiddensearch" style="display: none;" value="">
<input type="text" name="category" id="category" style="display: none;" value="Poster">

<input type="text" name="propertytype1" id="propertytype1" style="display: none;" value="All property types">
<div class="form-group">


<input type="text" oninput="InputChange()" id='search' placeholder="  search by state, studio or postcode" class="form-control form-control-lg" style="">
</div>

              <div id="accordion">
    <div class="card">
      <div class="card-header">
        <a class="card-link" data-toggle="collapse" href="#collapseOne">
          Property Type
        </a>
      </div>
      <div id="collapseOne" class="collapse" data-parent="#accordion">
        <div class="card-body">




      <div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="All" name="propertycheck" value="All property types" onclick='changePropertyType(this.id)'>
        <label class="form-check-label" for="all">All property types</label>
      </div>
      <div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="House" name="propertycheck" value="House" onclick='changePropertyType(this.id)' >
        <label class="form-check-label" for="all"> House</label>
      </div>
      <div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="Apartment" name="propertycheck" value="Apartment & Unit" onclick='changePropertyType(this.id)'>
        <label class="form-check-label" for="all"> Apartment & Unit</label>
      </div>
      <div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="Town" name="propertycheck" value="Town House" onclick='changePropertyType(this.id)'>
        <label class="form-check-label" for="all">Town House</label>
      </div>
<div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="Villa" name="propertycheck" value="Villa" onclick='changePropertyType(this.id)'>
        <label class="form-check-label" for="all">Villa</label>
      </div>

<div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="Land" name="propertycheck" value="Land" onclick='changePropertyType(this.id)'>
        <label class="form-check-label" for="all">Land</label>
      </div>
      <div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="Acreage" name="propertycheck" value="Acreage" onclick='changePropertyType(this.id)'>
        <label class="form-check-label" for="all"> Acreage</label>
      </div>
      <div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="Rural" name="propertycheck" value="Rural" onclick='changePropertyType(this.id)'>
        <label class="form-check-label" for="all"> Rural</label>
      </div>
      <div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="Block" name="propertycheck" value="Block Of Units" onclick='changePropertyType(this.id)'>
        <label class="form-check-label" for="all">Block Of Units</label>
      </div>
<div class="form-check dropdown-item">
        <input type="checkbox" class="form-check-input" id="Retirement" name="propertycheck" value="Retirement Living" onclick='changePropertyType(this.id)'>
        <label class="form-check-label" for="all">Retirement Living</label>
      </div>





        </div>
      </div>
    </div>


    <div class="card">
      <div class="card-header">
        <a class="collapsed card-link" data-toggle="collapse" href="#collapseTwo">
        Price (min)
      </a>
      </div>
      <div id="collapseTwo" class="collapse" data-parent="#accordion">
        <div class="card-body">



<select name='Price(min)' class="custom-select custom-select-sm mb-3" style='background-color:rgba(0,0,0,0); color:orange; border-color:rgba(0,0,0,0)'>
<option selected>Price (min)</option>
<option>Any </option>
<option>$50,000 </option>
<option>$75,000</option>
<option>$100,000</option>
<option>$125,000</option>
<option>$150,000</option>
<option>$175,000</option>
<option>$200,000</option>
<option>$225,000</option>
<option>$250,000</option>
<option>$275,000</option>
<option>$300,000</option>
<option>$325,000</option>
<option>$350,000</option>
<option>$350,000</option>
<option>$350,000</option>
<option>$375,000</option>
<option>$400,000</option>
<option>$425,000</option>
<option>$450,000</option>
<option>$475,000</option>
<option>$500,000</option>
<option>$550,000</option>
<option>$600,000</option>
<option>$650,000</option>
<option>$700,000</option>
<option>$750,000</option>
<option>$800,000</option>
<option>$850,000</option>
<option>$900,000</option>
<option>$950,000</option>
<option>$1,000,000</option>
<option>$1,100,000</option>
<option>$1,200,000</option>
<option>$1,300,000</option>
<option>$1,400,000</option>
<option>$1,500,000</option>
<option>$1,600,000</option>
<option>$1,700,000</option>
<option>$1,800,000</option>
<option>$1,900,000</option>
<option>$2,000,000</option>
<option>$2,250,000</option>
<option>$2,500,000</option>
<option>$2,750,000</option>
<option>$3,000,000</option>
<option>$3,500,000</option>
<option>$4,000,000</option>
<option>$4,500,000</option>
<option>$5,000,000 </option>
<option>$7,000,000</option>
<option>$8,000,000</option>
<option>$9,000,000</option>
<option>$10,000,000</option>
<option>$12,000,000</option>
<option>$15,000,000</option>

</select>


        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <a class="collapsed card-link" data-toggle="collapse" href="#collapseThree">
          Price (max)
        </a>
      </div>
      <div id="collapseThree" class="collapse" data-parent="#accordion">
        <div class="card-body">



<select name='Price(max)' class="custom-select custom-select-sm mb-3" style='background-color:rgba(0,0,0,0); color:orange; border-color:rgba(0,0,0,0)'>
<option selected>Price (max)</option>
<option>Any</option>
<option>$50,000 </option>
<option>$75,000</option>
<option>$100,000</option>
<option>$125,000</option>
<option>$150,000</option>
<option>$175,000</option>
<option>$200,000</option>
<option>$225,000</option>
<option>$250,000</option>
<option>$275,000</option>
<option>$300,000</option>
<option>$325,000</option>
<option>$350,000</option>
<option>$350,000</option>
<option>$350,000</option>
<option>$375,000</option>
<option>$400,000</option>
<option>$425,000</option>
<option>$450,000</option>
<option>$475,000</option>
<option>$500,000</option>
<option>$550,000</option>
<option>$600,000</option>
<option>$650,000</option>
<option>$700,000</option>
<option>$750,000</option>
<option>$800,000</option>
<option>$850,000</option>
<option>$900,000</option>
<option>$950,000</option>
<option>$1,000,000</option>
<option>$1,100,000</option>
<option>$1,200,000</option>
<option>$1,300,000</option>
<option>$1,400,000</option>
<option>$1,500,000</option>
<option>$1,600,000</option>
<option>$1,700,000</option>
<option>$1,800,000</option>
<option>$1,900,000</option>
<option>$2,000,000</option>
<option>$2,250,000</option>
<option>$2,500,000</option>
<option>$2,750,000</option>
<option>$3,000,000</option>
<option>$3,500,000</option>
<option>$4,000,000</option>
<option>$4,500,000</option>
<option>$5,000,000 </option>
<option>$7,000,000</option>
<option>$8,000,000</option>
<option>$9,000,000</option>
<option>$10,000,000</option>
<option>$12,000,000</option>
<option>$15,000,000</option>

</select>




        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <a class="collapsed card-link" data-toggle="collapse" href="#collapseFour">
         Bed(min)
        </a>
      </div>
      <div id="collapseFour" class="collapse" data-parent="#accordion">
        <div class="card-body">

            <select name='Bed(min)' class="custom-select custom-select-sm mb-3" style='background-color:rgba(0,0,0,0); color:orange; border-color:rgba(0,0,0,0)'>
            <option selected>Bed (min)</option>
            <option>Any</option>
            <option>Studio</option>
            <option>1 Bed</option>
            <option>2 Beds</option>
            <option>3 Beds</option>
            <option>4 Beds</option>
            <option>5 Beds</option>
            </select>



        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <a class="collapsed card-link" data-toggle="collapse" href="#collapseFive">
          Bed (max)
        </a>
      </div>
      <div id="collapseFive" class="collapse" data-parent="#accordion">
        <div class="card-body">

        <select name='Bed(max)' class="custom-select custom-select-sm mb-3" style='background-color:rgba(0,0,0,0); color:orange; border-color:rgba(0,0,0,0)'>
        <option selected>Bed (max)</option>
        <option>Any</option>
        <option>Studio</option>
        <option>1 Bed</option>
        <option>2 Beds</option>
        <option>3 Beds</option>
        <option>4 Beds</option>
        <option>5 Beds</option>
        </select>


        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <a class="collapsed card-link" data-toggle="modal" data-target="#myModal" href='#'>
          Filters
        </a>
      </div>

    </div>

<div class="card">
      <div class="card-header">
        <input type='Submit', value='Update' class='btn btn-default' >
      </div>

    </div>





  </div>

    </form>
            </div>
            <!--end div3-->



	</div>
	<!--end of row-->





</div>
<!--end of container div-->
{% csrf_token %}
<script>

var searchlist = []
// this will take the least of items to be searched
var list1 = []
{% for i in qs %}
list1.push('{{i.state}}' + ' ' + '{{i.suburb}}' + ' ' + '{{i.postcode}}')
{% endfor %}

// this function is used to check when semicolon has been added  to the search input as it enables multiple search
function InputChange(){
  document.querySelector("#searchitem").style.display = 'block';
  var searchitem = document.querySelector("#search").value
  if (searchitem.includes(";")){
    console.log("ok")


    var inputedvalue = document.querySelector("#search").value


    if (inputedvalue){
    var length = searchlist.length
    var searchitem = document.querySelector("#searchitem")
    inputedvalue = inputedvalue.slice(0, -1);
    var spanelement = document.createElement("span");
    spanelement.setAttribute("class", "badge badge-primary");
    // var addlength =  length
    spanelement.setAttribute("id", 'itemid'+length);



    spanelement.style.marginLeft = '3px';
    spanelement.style.marginRight = '3px';
    spanelement.addEventListener('click',
    function(){
    var id = this.innerHTML.slice(0,-2)

    // var element = document.querySelector(id);


    var index = searchlist.indexOf(id)
    searchlist.splice( index, 1 );
    // var propertyarray = []
    // var checkboxes = document.querySelectorAll('input[type=checkbox][name=propertycheck]:checked')

    // for (var i = 0; i < checkboxes.length; i++) {
    // propertyarray.push(checkboxes[i].value)
    // }
    // var propertytype1 = document.querySelector("#propertytype1").value = propertylist


    this.remove()

    var hiddensearch= document.querySelector("#hiddensearch").value = searchlist
    // console.log(propertyarray)
    })

    var testnode = document.createTextNode(inputedvalue)
    var cancel = document.createTextNode(' X')
    spanelement.appendChild(testnode)
    spanelement.appendChild(cancel)
    searchitem.appendChild(spanelement)
    searchlist[length] = spanelement.innerHTML
    // console.log(searchlist)
    var hiddensearch= document.querySelector("#hiddensearch").value = searchlist

    var checkboxes = document.querySelectorAll('input[type=checkbox][name=propertycheck]:checked')

    // for (var i = 0; i < checkboxes.length; i++) {
    // propertyarray.push(checkboxes[i].value)
    // }
    //var propertytype1 = document.querySelector("#propertytype1").value = propertylist
    // var bedmin1 = document.querySelector("#bedmin1").value = document.querySelector(".bedmin").innerHTML.trim().slice(0, 1);
    // var bedmax1 = document.querySelector("#bedmax1").value = document.querySelector(".bedmax").innerHTML.trim().slice(0, 1);
    // var pricemin1 = document.querySelector("#pricemin1").value = document.querySelector(".pricemin").innerHTML
    // var pricemax1 = document.querySelector("#pricemax1").value = document.querySelector(".pricemax").innerHTML
    // console.log(bedmin1)
    inputedvalue = document.querySelector("#search").value = ''
    }


  }

}
// endof inputchange function



function autocomplete(inp, arr) {
  /*the autocomplete function takes two arguments,
  the text field element and an array of possible autocompleted values:*/
  var currentFocus;
  /*execute a function when someone writes in the text field:*/
  inp.addEventListener("input", function(e) {
      var a, b, i, val = this.value;
      /*close any already open lists of autocompleted values*/
      closeAllLists();
      if (!val) { return false;}
      currentFocus = -1;
      /*create a DIV element that will contain the items (values):*/
      a = document.createElement("DIV");
      a.setAttribute("id", this.id + "autocomplete-list");
      a.setAttribute("class", "autocomplete-items");
      /*append the DIV element as a child of the autocomplete container:*/
      this.parentNode.appendChild(a);
      /*for each item in the array...*/
      for (i = 0; i < arr.length; i++) {
        /*check if the item starts with the same letters as the text field value:*/
        if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
          /*create a DIV element for each matching element:*/
          b = document.createElement("DIV");
          /*make the matching letters bold:*/
          b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
          b.innerHTML += arr[i].substr(val.length);
          /*insert a input field that will hold the current array item's value:*/
          b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
          /*execute a function when someone clicks on the item value (DIV element):*/
          b.addEventListener("click", function(e) {
              /*insert the value for the autocomplete text field:*/
              inp.value = this.getElementsByTagName("input")[0].value;
              /*close the list of autocompleted values,
              (or any other open lists of autocompleted values:*/
              closeAllLists();
          });
          a.appendChild(b);
        }
      }
  });
  /*execute a function presses a key on the keyboard:*/
  inp.addEventListener("keydown", function(e) {
      var x = document.getElementById(this.id + "autocomplete-list");
      if (x) x = x.getElementsByTagName("div");
      if (e.keyCode == 40) {
        /*If the arrow DOWN key is pressed,
        increase the currentFocus variable:*/
        currentFocus++;
        /*and and make the current item more visible:*/
        addActive(x);
      } else if (e.keyCode == 38) { //up
        /*If the arrow UP key is pressed,
        decrease the currentFocus variable:*/
        currentFocus--;
        /*and and make the current item more visible:*/
        addActive(x);
      } else if (e.keyCode == 13) {
        /*If the ENTER key is pressed, prevent the form from being submitted,*/
        e.preventDefault();
        if (currentFocus > -1) {
          /*and simulate a click on the "active" item:*/
          if (x) x[currentFocus].click();
        }
      }
  });
  function addActive(x) {
    /*a function to classify an item as "active":*/
    if (!x) return false;
    /*start by removing the "active" class on all items:*/
    removeActive(x);
    if (currentFocus >= x.length) currentFocus = 0;
    if (currentFocus < 0) currentFocus = (x.length - 1);
    /*add class "autocomplete-active":*/
    x[currentFocus].classList.add("autocomplete-active");
  }
  function removeActive(x) {
    /*a function to remove the "active" class from all autocomplete items:*/
    for (var i = 0; i < x.length; i++) {
      x[i].classList.remove("autocomplete-active");
    }
  }
  function closeAllLists(elmnt) {
    /*close all autocomplete lists in the document,
    except the one passed as an argument:*/
    var x = document.getElementsByClassName("autocomplete-items");
    for (var i = 0; i < x.length; i++) {
      if (elmnt != x[i] && elmnt != inp) {
        x[i].parentNode.removeChild(x[i]);
      }
    }
  }

  /*execute a function when someone clicks in the document:*/
  document.addEventListener("click", function (e) {
    document.querySelector("#searchitem").style.display = 'block'
    var inputedvalue = document.querySelector("#search").value
    if (inputedvalue){
    var searchitem = document.querySelector("#searchitem")
    var inputedvalue = document.querySelector("#search").value
    var spanelement = document.createElement("span");
    var length = searchlist.length
    spanelement.setAttribute("class", "badge badge-primary badge-lg");
    spanelement.setAttribute("id", 'itemid'+length);
    spanelement.style.marginLeft = '3px';
    spanelement.style.marginRight = '3px';

    spanelement.addEventListener('click',
    function(){
    var id = this.innerHTML.slice(0,-2)
    var index = searchlist.indexOf(id)
    searchlist.splice( index, 1 );
    // console.log(id, index, searchlist)
    this.remove()
    var hiddensearch= document.querySelector("#hiddensearch").value = searchlist

    // var checkboxes = document.querySelectorAll('input[type=checkbox][name=propertycheck]:checked')

    // for (var i = 0; i < checkboxes.length; i++) {
    // propertyarray.push(checkboxes[i].value)
    // }
    //var propertytype1 = document.querySelector("#propertytype1").value = propertylist

    //console.log(propertytype1)
    }

    )

    var testnode = document.createTextNode(inputedvalue)
    var cancel = document.createTextNode(' X')


    spanelement.appendChild(testnode)
    spanelement.appendChild(cancel)


    // console.log(spanelement)

    searchitem.appendChild(spanelement)
    searchlist[length] = spanelement.innerHTML
    var hiddensearch= document.querySelector("#hiddensearch").value = searchlist


    // var checkboxes = document.querySelectorAll('input[type=checkbox][name=propertycheck]:checked')

    // for (var i = 0; i < checkboxes.length; i++) {
    // propertyarray.push(checkboxes[i].value)
    // }
    //var propertytype1 = document.querySelector("#propertytype1").value = propertylist

  //console.log(propertytype1)

    inputedvalue = document.querySelector("#search").value = ''
    }

    // console.log(inputedvalue)
      closeAllLists(e.target);

  });
}

/*An array containing all the country names in the world:*/
var countries = ["Afghanistan","Albania","Algeria","Andorra","Angola","Anguilla","Antigua & Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia & Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central Arfrican Republic","Chad","Chile","China","Colombia","Congo","Cook Islands","Costa Rica","Cote D Ivoire","Croatia","Cuba","Curacao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Polynesia","French West Indies","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guernsey","Guinea","Guinea Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauro","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","North Korea","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Pierre & Miquelon","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","St Kitts & Nevis","St Lucia","St Vincent","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor L'Este","Togo","Tonga","Trinidad & Tobago","Tunisia","Turkey","Turkmenistan","Turks & Caicos","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States of America","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Virgin Islands (US)","Yemen","Zambia","Zimbabwe"];
// var countries = [

// console.log(countries)


/*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/
autocomplete(document.getElementById("search"), list1);
// end of auto complete function




function mapShow(){
    document.querySelector('#map').style.display='block'
    document.querySelector('#profile').style.display='none'

    console.log('shown')
}

function mapHide(){
    document.querySelector('#map').style.display='none'
    document.querySelector('#profile').style.display='block'

    console.log('hidden')
}



var url1 = 'http://anandrathi.pythonanywhere.com/'
    function StarSearch(e){
        console.log(e)
	var token = document.querySelector("input[name=csrfmiddlewaretoken]").value

	var url = url1 +'savesearch/'
	let  formData = new FormData()
	formData.append('post_id', e)


	fetch(url,
	{
	body: new URLSearchParams(formData),
	method: 'post',
	headers:{
	'X-CSRFTOKEN': token
	}


	}).then(res => res.json()).then(function(data) {
        var post_id = '#star'+data.post_id
        if (data.msg == 'saved'){
           document.querySelector(post_id).style.color = 'orange'
        }
        else if (data.msg == 'deleted'){
           document.querySelector(post_id).style.color = 'grey'
        }
 		console.log(data)



	})

    }
</script>

<script>

var latitude = []
var longitude = []
var address = []
var data = []

{% for i in pagin %}
var person = {firstName:Number({{i.latitude}}), lastName:Number({{i.longitude}})};
data.push(person)
console.log(person)
latitude.push('{{i.latitude}}');
longitude.push('{{i.longitude}}');
address.push('<strong>Chipotle on Broadway</strong><br>' + '{{i.street_number}}' + '{{i.street_name}}' + '{{i.suburb}}' + '{{i.state}}' + '{{i.postcode}}' + '<br>' + '<a href="https://goo.gl/maps/jKNEDz4SyyH2">Get Directions</a>', {{i.latitude}}, {{i.longitude}});


// console.log('datatttttttt iss', {{i.latitude}}, {{i.longitude}});

{% endfor %}
console.log(data)




GetCenterFromDegrees(data)



function GetCenterFromDegrees(data){
    // var data = [{lat:22.281610498720003,lng:70.77577162868579},{lat:22.28065743343672,lng:70.77624369747241},{lat:22.280860953131217,lng:70.77672113067706},{lat:22.281863655593973,lng:70.7762061465462}];
    var num_coords = data.length;
    var X = 0.0;
    var Y = 0.0;
    var Z = 0.0;

    for(i=0; i<num_coords; i++){
        var lat = data[i].lat * Math.PI / 180;
        var lon = data[i].lng * Math.PI / 180;
        var a = Math.cos(lat) * Math.cos(lon);
        var b = Math.cos(lat) * Math.sin(lon);
        var c = Math.sin(lat);

        X += a;
        Y += b;
        Z += c;
    }

    X /= num_coords;
    Y /= num_coords;
    Z /= num_coords;

    lon = Math.atan2(Y, X);
    var hyp = Math.sqrt(X * X + Y * Y);
    lat = Math.atan2(Z, hyp);

    var finalLat = lat * 180 / Math.PI;
    var finalLng =  lon * 180 / Math.PI;

    var finalArray = Array();
    finalArray.push(finalLat);
    finalArray.push(finalLng);
    console.log('dataaaaaaa',finalArray)
    return finalArray;
}









// console.log('datatttttttt iss', latitude, longitude, address);
function initMap() {
    // console.log('datatttttttt iss', latitude, longitude);

	var broadway = {
		info: '<strong>Chipotle on Broadway</strong><br>\
					 N Broadway St<br> Chicago, IL 60640<br>\
					<a href="https://goo.gl/maps/jKNEDz4SyyH2">Get Directions</a>',
		lat: 41.976816,
		long: -87.659916
	};




	var sheridan = {
		info: '<strong>Chipotle on Sheridan</strong><br>\r\
					6600 N Sheridan Rd<br> Chicago, IL 60626<br>\
					<a href="https://goo.gl/maps/QGUrqZPsYp92">Get Directions</a>',
		lat: 42.002707,
		long: -87.661236
	};

	var locations = [
      [broadway.info, broadway.lat, broadway.long],
      [sheridan.info, sheridan.lat, sheridan.long],
      ['sheridan.info', -31.9431656, 115.876085],
      ['sheridan.info2222', -31.94942, 115.831923],

    ];

    // var locations = [
    // {% for i in pagin %}

    //   ['{{i.street_number}}' + ', ' + '{{i.street_name}}' + ', '  + '{{i.suburb}}' + ', '  + '{{i.state}}' + ', '  + '{{i.postcode}}', {{i.longitude}} , {{i.latitude}}],
    // {% endfor %}

    //  ];

    console.log(locations)

	var map = new google.maps.Map(document.getElementById('map'), {
		zoom: 13,
		center: new google.maps.LatLng(-35.473469, 149.012375),
		mapTypeId: google.maps.MapTypeId.ROADMAP
	});

	var infowindow = new google.maps.InfoWindow({});

	var marker, i;

	for (i = 0; i < locations.length; i++) {
		marker = new google.maps.Marker({
			position: new google.maps.LatLng(locations[i][1], locations[i][2]),
			map: map
		});

		google.maps.event.addListener(marker, 'click', (function (marker, i) {
			return function () {
				infowindow.setContent(locations[i][0]);
				infowindow.open(map, marker);
			}
		})(marker, i));
	}
}





propertylist=[]
function changePropertyType(e){
<!--console.log(e)-->
var id = '#'+e
var qs =document.querySelector(id)
var a = propertylist.indexOf(qs.value);

if (qs.checked==true){
    if(qs.value=='All property types'){
        document.querySelector('#House').checked = true
        propertylist.push(document.querySelector('#House').value)
        document.querySelector('#Apartment').checked = true
        propertylist.push(document.querySelector('#Apartment').value)
        document.querySelector('#Town').checked = true
        propertylist.push(document.querySelector('#Town').value)
        document.querySelector('#Villa').checked = true
        propertylist.push(document.querySelector('#Villa').value)
        document.querySelector('#Land').checked = true
        propertylist.push(document.querySelector('#Land').value)
        document.querySelector('#Acreage').checked = true
        propertylist.push(document.querySelector('#Acreage').value)
        document.querySelector('#Rural').checked = true
        propertylist.push(document.querySelector('#Rural').value)
        document.querySelector('#Retirement').checked = true
        propertylist.push(document.querySelector('#Retirement').value)
        document.querySelector('#Block').checked = true
        propertylist.push(document.querySelector('#Block').value)
 //document.querySelector('#').checked = true


}
if (a==-1){

propertylist.push(qs.value)
var propertytype1 = document.querySelector('#propertytype1')
propertytype1.value = propertylist
console.log(propertytype1.value)
} //if a==-1


else{

propertylist.splice(a, 1);
var propertytype1 = document.querySelector('#propertytype1')
propertytype1.value= propertylist
console.log(propertytype1.value)

}//else
}// if qs


else{
    // console.log('nahhhh')
    propertylist.splice(a, 1);
    var propertytype1 = document.querySelector('#propertytype1')
    propertytype1.value= propertylist
    console.log(propertytype1.value)
}

} //function



</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBfZ86mdGX5E7o4PGSB7ct22axSb_JzVTY&callback=initMap"></script>



{% endblock %}